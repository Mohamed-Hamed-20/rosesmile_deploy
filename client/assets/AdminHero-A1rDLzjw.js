import{r as g,j as e,z as C,y as c,f as F,J as R,K as $,a as S,O as G,R as _,d as Q}from"./index-BzNwyTTe.js";import{L as I,S as J}from"./sweetalert2.esm.all-Cxdeaupf.js";import{u as T}from"./useMutation-DDNtJw2q.js";import{S as W}from"./search-SKB_sI0d.js";import{P as K}from"./plus-BZcG7NK8.js";import{P as V,T as X}from"./trash-2-Ds3YWRdD.js";import{C as Y}from"./chevron-left-tkGkg_Wo.js";const Z=({isOpen:h,onClose:j,addHero:s})=>{const[l,d]=g.useState({title:"",subtitle:"",buttonText:"",buttonLink:"",image:null}),[p,a]=g.useState(null),[m,b]=g.useState(!1),v=(n,x)=>{const t=n.target.value;d({...l,[x]:t})},k=n=>{const x=n.target.files[0];x&&(a(URL.createObjectURL(x)),d({...l,image:x}))},o=async n=>{if(n.preventDefault(),!l.image){c.error("يرجى اختيار صورة");return}b(!0);const x=new FormData;x.append("title",l.title),x.append("subtitle",l.subtitle),x.append("buttonText",l.buttonText),x.append("buttonLink",l.buttonLink),x.append("image",l.image);try{const t=await s(x);t.success?(c.success(t.message),j(),d({title:"",subtitle:"",buttonText:"",buttonLink:"",image:null}),a(null)):c.error(t.message||"حدث خطأ أثناء إضافة الصورة الرئيسية")}catch(t){c.error(t.message||"حدث خطأ أثناء إضافة الصورة الرئيسية")}finally{b(!1)}},N=()=>{d({title:"",subtitle:"",buttonText:"",buttonLink:"",image:null}),a(null),j()},f=n=>{n.target===n.currentTarget&&N()};return h?e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:f,children:e.jsxs(C.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl h-[90vh] overflow-hidden flex flex-col md:flex-row",dir:"rtl",children:[e.jsxs("div",{className:"w-full md:w-1/2 bg-gray-50 p-6 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"معاينة الصورة"}),e.jsx("div",{className:"relative rounded-lg overflow-hidden border-2 border-dashed border-gray-300 hover:border-blue-500 transition-colors duration-200 aspect-[16/9]",children:e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer",onClick:()=>document.getElementById("imageUpload").click(),children:[p?e.jsxs("div",{className:"w-full h-full relative",children:[e.jsx("img",{src:p,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:"تغيير الصورة"})})]}):e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"mb-3 text-gray-400",children:e.jsx("svg",{className:"mx-auto h-12 w-12",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("p",{className:"text-sm text-gray-500",children:"اضغط لرفع صورة"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, GIF حتى 10MB"})]}),e.jsx("input",{type:"file",id:"imageUpload",onChange:k,className:"hidden",accept:"image/*",disabled:m})]})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-500 space-y-1",children:[e.jsx("p",{children:"• يفضل أن تكون الصورة بأبعاد 16:9 (مثل 1920×1080)"}),e.jsx("p",{children:"• الحد الأقصى لحجم الملف: 10MB"}),e.jsx("p",{children:"• الصورة ستظهر في الشكل الرئيسي للموقع"})]})]}),e.jsxs("div",{className:"w-full md:w-1/2 p-6 md:p-8 overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 text-gray-800 border-b pb-4",children:"إضافة صورة رئيسية جديدة"}),e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العنوان"}),e.jsx("input",{type:"text",value:l.title,onChange:n=>v(n,"title"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right transition-colors",placeholder:"أدخل عنوان الصورة الرئيسية",required:!0,disabled:m})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),e.jsx("textarea",{value:l.subtitle,onChange:n=>v(n,"subtitle"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right transition-colors resize-none",rows:"3",placeholder:"أدخل وصف الصورة الرئيسية",required:!0,disabled:m})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نص الزر"}),e.jsx("input",{type:"text",value:l.buttonText,onChange:n=>v(n,"buttonText"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right transition-colors",placeholder:"مثال: اقرأ المزيد",required:!0,disabled:m})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رابط الزر"}),e.jsx("input",{type:"url",value:l.buttonLink,onChange:n=>v(n,"buttonLink"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right transition-colors",placeholder:"https://example.com",required:!0,disabled:m})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 pt-6 border-t",children:[e.jsx("button",{type:"submit",className:"w-full px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center gap-2 font-medium disabled:opacity-70",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"animate-spin",size:20}),"جاري الإضافة..."]}):"تأكيد الإضافة"}),e.jsx("button",{type:"button",onClick:N,className:"w-full px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200 font-medium",disabled:m,children:"إلغاء"})]})]})]})]})},"Add-Hero-Modal"):null},ee=({isOpen:h,onClose:j,hero:s,updateHero:l})=>{var k;const[d,p]=g.useState({title:"",subtitle:"",buttonText:"",buttonLink:""}),[a,m]=g.useState(!1);g.useEffect(()=>{s&&p({title:s.title||"",subtitle:s.subtitle||"",buttonText:s.buttonText||"",buttonLink:s.buttonLink||""})},[s]);const b=(o,N)=>{const f=o.target.value;p({...d,[N]:f})},v=async o=>{o.preventDefault(),m(!0);const N={title:d.title,subtitle:d.subtitle,buttonText:d.buttonText,buttonLink:d.buttonLink};try{const f=await l({id:s._id,data:N});f.success?(c.success(f.message),j()):c.error(f.message||"حدث خطأ أثناء تعديل الصورة الرئيسية")}catch(f){c.error(f.message||"حدث خطأ أثناء تعديل الصورة الرئيسية")}finally{m(!1)}};return!h||!s?null:e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",children:e.jsxs(C.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl h-[90vh] overflow-hidden flex flex-col md:flex-row",dir:"rtl",children:[e.jsxs("div",{className:"w-full md:w-1/2 bg-gray-50 p-6 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"معاينة الصورة الحالية"}),e.jsx("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 aspect-[16/9] w-full",children:(k=s.image)!=null&&k.url?e.jsx("img",{src:s.image.url,alt:s.title,className:"w-full h-full object-cover object-center"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"لا توجد صورة"})})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-500 space-y-1",children:[e.jsx("p",{children:"• الصورة الحالية في الشكل الرئيسي للموقع"}),e.jsx("p",{children:"• لتغيير الصورة، استخدم زر تحديث الصورة"}),e.jsx("p",{children:"• يفضل أن تكون الصورة بأبعاد 16:9 (مثل 1920×1080)"})]})]}),e.jsxs("div",{className:"w-full md:w-1/2 p-6 md:p-8 overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 text-gray-800 border-b pb-4",children:"تعديل بيانات الصورة الرئيسية"}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العنوان"}),e.jsx("input",{type:"text",value:d.title,onChange:o=>b(o,"title"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right transition-colors",placeholder:"أدخل عنوان الصورة الرئيسية",required:!0,disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),e.jsx("textarea",{value:d.subtitle,onChange:o=>b(o,"subtitle"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right transition-colors resize-none",rows:"3",placeholder:"أدخل وصف الصورة الرئيسية",required:!0,disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نص الزر"}),e.jsx("input",{type:"text",value:d.buttonText,onChange:o=>b(o,"buttonText"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right transition-colors",placeholder:"مثال: اقرأ المزيد",required:!0,disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رابط الزر"}),e.jsx("input",{type:"url",value:d.buttonLink,onChange:o=>b(o,"buttonLink"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right transition-colors",placeholder:"https://example.com",required:!0,disabled:a})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 pt-6 border-t",children:[e.jsx("button",{type:"submit",className:"w-full px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center gap-2 font-medium disabled:opacity-70",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"animate-spin",size:20}),"جاري الحفظ..."]}):"حفظ التعديلات"}),e.jsx("button",{type:"button",onClick:j,className:"w-full px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200 font-medium",disabled:a,children:"إلغاء"})]})]})]})]})},"Edit-Hero-Modal")},M="http://localhost:5000/api/v1/hero",te=async({page:h,size:j,search:s})=>{const l=await S.get(`${M}?page=${h}&size=${j}&search=${s}`,{withCredentials:!0});return console.log(l==null?void 0:l.data),l.data},se=()=>{const[h,j]=F(),s=R(),l=parseInt(h.get("page"))||1,d=h.get("size")||8,p=h.get("search")||"",{data:a,isLoading:m,isFetching:b,isError:v,error:k}=$({queryKey:["heroes",l,p],queryFn:()=>te({page:l,size:d,search:p}),keepPreviousData:!0,staleTime:1e3*60*5}),o=T({mutationFn:async t=>(await S.post(M,t,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data,onSuccess:()=>{s.invalidateQueries(["hero"])},onError:t=>{var u,y;const i=(y=(u=t.response)==null?void 0:u.data)==null?void 0:y.message;i?c.error(i):c.error("حدث خطأ أثناء إضافة الصورة الرئيسية")}}),N=T({mutationFn:async({id:t,data:i})=>(await S.put(`${M}/${t}`,i,{withCredentials:!0})).data,onSuccess:()=>{s.invalidateQueries(["hero"])},onError:t=>{var u,y;const i=(y=(u=t.response)==null?void 0:u.data)==null?void 0:y.message;i?c.error(i):c.error("حدث خطأ أثناء تحديث الصورة الرئيسية")}}),f=T({mutationFn:async({id:t,formData:i})=>(await S.put(`${M}/${t}`,i,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data,onSuccess:()=>{s.invalidateQueries(["hero"])},onError:t=>{var u,y;const i=(y=(u=t.response)==null?void 0:u.data)==null?void 0:y.message;i?c.error(i):c.error("حدث خطأ أثناء تحديث صورة الصورة الرئيسية")}}),n=T({mutationFn:async t=>(await S.delete(`${M}/${t}`,{withCredentials:!0})).data,onSuccess:()=>{s.invalidateQueries(["hero"])},onError:t=>{var u,y;const i=(y=(u=t.response)==null?void 0:u.data)==null?void 0:y.message;i?c.error(i):c.error("حدث خطأ أثناء حذف الصورة الرئيسية")}}),x=t=>{j({page:t.toString(),search:p})};return{heroes:(a==null?void 0:a.heroes)||[],total:(a==null?void 0:a.totalHeroes)||0,page:l,totalPages:Math.ceil(((a==null?void 0:a.totalHeroes)||0)/d),loading:m,isFetching:b,handlePageChange:x,error:v?(k==null?void 0:k.message)||"حدث خطأ أثناء جلب البيانات":null,addHero:o.mutateAsync,addLoading:o.isPending,updateHero:N.mutateAsync,editLoading:N.isPending,updateHeroImage:f.mutateAsync,imageUploadLoading:f.isPending,deleteHero:n.mutateAsync,deleteLoading:n.isPending}},ae=({isOpen:h,onClose:j,hero:s,updateHeroImage:l})=>{var n,x;const[d,p]=g.useState(null),[a,m]=g.useState(null),[b,v]=g.useState(!1);g.useEffect(()=>{h||(p(null),m(null))},[h]);const k=t=>{const i=t.target.files[0];i&&(m(URL.createObjectURL(i)),p(i))},o=()=>{p(null),m(null),j()},N=t=>{t.target===t.currentTarget&&o()},f=async t=>{if(t.preventDefault(),!d){c.error("يرجى اختيار صورة للتحديث");return}v(!0);const i=new FormData;i.append("image",d);try{const u=await l({id:s._id,formData:i});u.success?(c.success(u.message),o()):c.error(u.message||"فشل تحديث الصورة الرئيسية")}catch(u){c.error(u.message||"حدث خطأ أثناء تحديث الصورة")}finally{v(!1)}};return!h||!s?null:e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",onClick:N,children:e.jsxs(C.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},className:"bg-white rounded-xl shadow-2xl w-full max-w-xl h-auto overflow-hidden flex flex-col items-center justify-center",dir:"rtl",children:[e.jsxs("div",{className:"w-full bg-gray-50 p-6 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 w-full",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"معاينة الصورة"}),e.jsx("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"relative rounded-lg overflow-hidden border-2 border-dashed border-gray-300 hover:border-blue-500 transition-colors duration-200 aspect-[16/9] w-full max-w-lg mx-auto",children:e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer",onClick:()=>document.getElementById("heroImageUpload").click(),children:[a||(n=s.image)!=null&&n.url?e.jsxs("div",{className:"w-full h-full relative group",children:[e.jsx("img",{src:a||((x=s.image)==null?void 0:x.url),alt:s.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:"تغيير الصورة"})})]}):e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"mb-3 text-gray-400",children:e.jsx("svg",{className:"mx-auto h-12 w-12",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("p",{className:"text-sm text-gray-500",children:"اضغط لرفع صورة"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, GIF حتى 10MB"})]}),e.jsx("input",{type:"file",id:"heroImageUpload",onChange:k,className:"hidden",accept:"image/*",disabled:b})]})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-500 space-y-1 text-center w-full",children:[e.jsx("p",{children:"• يفضل أن تكون الصورة بأبعاد 16:9 (مثل 1920×1080)"}),e.jsx("p",{children:"• الحد الأقصى لحجم الملف: 10MB"}),e.jsx("p",{children:"• الصورة ستظهر في الشكل الرئيسي للموقع"})]})]}),e.jsxs("div",{className:"flex justify-between items-center gap-4 w-full px-6 pb-6 pt-2 border-t mt-2",children:[e.jsx("button",{type:"button",onClick:o,className:"px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200 font-medium",disabled:b,children:"إلغاء"}),e.jsx("button",{type:"button",onClick:f,className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center gap-2 font-medium disabled:opacity-70",disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"animate-spin",size:20}),"جاري التحديث..."]}):"تحديث الصورة"})]})]})},"Update-Hero-Image-Modal")},ue=()=>{const[h,j]=F(),{heroes:s,total:l,loading:d,error:p,page:a,totalPages:m,handlePageChange:b,addHero:v,updateHero:k,deleteHero:o,updateHeroImage:N}=se(),f=h.get("search")||"",[n,x]=g.useState(f),[t,i]=g.useState(!1),[u,y]=g.useState(!1),[D,z]=g.useState(!1),[B,E]=g.useState(null),[P,H]=g.useState(null),U=r=>{H(r),y(!0),z(!1)},A=r=>{H(r),z(!0),y(!1)},O=async r=>{if((await J.fire({title:"هل أنت متأكد؟",text:"!لن تتمكن من التراجع عن هذا",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"!نعم، احذف",cancelButtonText:"إلغاء"})).isConfirmed){E(r);try{const w=await o(r);w.success?c.success(w.message):c.error(w.message)}catch(w){c.error(w.message||"حدث خطأ أثناء الحذف")}finally{E(null)}}},q=r=>{x(r),j(L=>{const w=new URLSearchParams(L);return r?(w.set("search",r),w.set("page","1")):w.delete("search"),w})};return g.useEffect(()=>{x(h.get("search")||"")},[h]),g.useEffect(()=>{p&&c.error(p)},[p]),e.jsxs("div",{className:"p-4 sm:p-6 bg-gray-100 min-h-screen overflow-x-auto",children:[e.jsx(G,{position:"top-center",toastOptions:{className:"z-[99999]",style:{zIndex:99999}}}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"relative w-full sm:w-auto sm:max-w-md",dir:"rtl",children:[e.jsx(W,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",value:n,onChange:r=>q(r.target.value),placeholder:"ابحث عن صورة رئيسية...",className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none text-right"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 w-full sm:w-auto transition cursor-pointer",children:[e.jsx(K,{size:20}),"إضافة صورة رئيسية جديد"]})]}),e.jsx(Z,{isOpen:t,onClose:()=>i(!1),addHero:v}),P&&e.jsx(ae,{isOpen:D,onClose:()=>z(!1),hero:P,updateHeroImage:N}),P&&e.jsx(ee,{isOpen:u,onClose:()=>H(null),hero:P,updateHero:k}),d?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(I,{className:"animate-spin text-blue-500",size:32})}):e.jsxs(_.Fragment,{children:[e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-right",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-gray-500",children:"الصورة"}),e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-gray-500",children:"التفاصيل"}),e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-gray-500",children:"زر الرابط"}),e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-gray-500",children:"تاريخ الإنشاء"}),e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-gray-500",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length>0?s.map(r=>{var L,w;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("div",{className:"relative aspect-square w-16 mx-auto bg-gray-100 overflow-hidden rounded-lg shadow-md cursor-pointer hover:opacity-90 transition",onClick:()=>H(r),children:e.jsx("img",{src:((L=r.image)==null?void 0:L.heroBanner)||((w=r.image)==null?void 0:w.url)||"/placeholder.png",alt:r.title,className:"w-full h-full object-cover",onClick:()=>A(r)})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"max-w-xl space-y-2",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:r.title||"لا يوجد عنوان"}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:r.subtitle||"لا يوجد وصف"})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.buttonText||"لا يوجد"}),r.buttonLink&&e.jsx("a",{href:r.buttonLink,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 truncate max-w-[150px]",children:r.buttonLink})]})}),e.jsx("td",{className:"px-4 py-3 text-center text-xs text-gray-500 w-32",children:new Date(r.createdAt).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{onClick:()=>U(r),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"تعديل",children:e.jsx(V,{size:18})}),e.jsx("button",{onClick:()=>O(r._id),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"حذف",disabled:B===r._id,children:B===r._id?e.jsx(I,{size:18,className:"animate-spin"}):e.jsx(X,{size:18})})]})})]},r._id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"لا توجد صور رئيسية متاحة"})})})]})}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-center gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["عرض ",s.length," من ",l," صورة رئيسية"]}),e.jsxs("div",{className:"flex items-center gap-2 space-x-reverse",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:["صفحة ",a," من ",m]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>b(a-1),disabled:a===1,className:"p-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:e.jsx(Y,{size:20})}),e.jsx("button",{onClick:()=>b(a+1),disabled:a===m,className:"p-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:e.jsx(Q,{size:20})})]})]})]})]})]})]})};export{ue as default};
