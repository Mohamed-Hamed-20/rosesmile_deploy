import{r as u,f as P,a as i}from"./index-BzNwyTTe.js";function E(){const[h,m]=u.useState([]),[f,a]=u.useState(!0),[y,w]=u.useState(0),[l,$]=P(),d=parseInt(l.get("page"))||1,p=6,g=l.get("search")||"",o="http://localhost:5000/api/v1/section",n=async()=>{a(!0);try{const s=await i.get(`${o}?page=${d}&size=${p}&search=${g}`,{withCredentials:!0});m(s.data.sections||[]),w(s.data.totalsections||0)}catch(s){console.error("Failed to fetch doctors:",s)}finally{a(!1)}},S=async s=>{var r,t;a(!0);try{const e=await i.post(`${o}/add`,s,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});return await n(),{success:!0,message:e.data.section}}catch(e){return{success:!1,message:((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||"خطأ أثناء الإضافة"}}finally{a(!1)}},C=async(s,r)=>{var t,e;a(!0);try{const c=await i.patch(`${o}/update?sectionId=${s}`,r,{withCredentials:!0});return await n(),{success:!0,message:c.data.message}}catch(c){return{success:!1,message:((e=(t=c.response)==null?void 0:t.data)==null?void 0:e.message)||"خطأ أثناء التحديث"}}finally{a(!1)}},I=async(s,r)=>{var t,e;a(!0);try{const c=await i.patch(`${o}/update?sectionId=${s}`,r,{withCredentials:!0});return await n(),{success:!0,message:c.data.message}}catch(c){return{success:!1,message:((e=(t=c.response)==null?void 0:t.data)==null?void 0:e.message)||"خطأ أثناء التحديث"}}finally{a(!1)}},x=async s=>{var r,t;a(!0);try{const e=await i.delete(`${o}/${s}`,{withCredentials:!0});return await n(),{success:!0,message:e.data.message}}catch(e){return{success:!1,message:((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||"خطأ أثناء الحذف"}}finally{a(!1)}};return u.useEffect(()=>{n()},[d,p,g]),{sections:h,loading:f,total:y,fetchsection:n,addSection:S,updateSection:C,updatesectionImage:I,deleteSection:x,setSearchParams:$}}export{E as u};
