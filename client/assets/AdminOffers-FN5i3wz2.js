import{r as g,j as e,z as C,y as u,f as D,J as T,K as G,a as S,O as Q,R as H,d as J}from"./index-BzNwyTTe.js";import{L,S as K}from"./sweetalert2.esm.all-Cxdeaupf.js";import{u as U}from"./useAdminService--oL7hFln.js";import{u as q}from"./useSections-C1INbFsB.js";import{u as P}from"./useMutation-DDNtJw2q.js";import{S as W}from"./search-SKB_sI0d.js";import{P as V}from"./plus-BZcG7NK8.js";import{P as X,T as Y}from"./trash-2-Ds3YWRdD.js";import{C as Z}from"./chevron-left-tkGkg_Wo.js";const ee=({isOpen:m,onClose:f,addOffer:n})=>{const[r,i]=g.useState({title:"",desc:"",display:!1,type:"service",reference:"",image:null}),[x,c]=g.useState(null),[o,y]=g.useState(!1),{services:b,loading:v}=U(),{sections:j,loading:p}=q();g.useEffect(()=>{m&&(r.type==="service"||r.type)},[m,r.type]);const h=(t,a)=>{const N=a==="display"?t.target.checked:t.target.value;i({...r,[a]:N})},s=t=>{const a=t.target.files[0];a&&(c(URL.createObjectURL(a)),i({...r,image:a}))},l=async t=>{if(t.preventDefault(),!r.image){u.error("يرجى اختيار صورة العرض");return}y(!0);const a=new FormData;a.append("title",r.title),a.append("desc",r.desc),a.append("display",r.display),a.append("type",r.type),a.append("reference",r.reference),a.append("image",r.image);try{const N=await n(a);N.success?(u.success(N.message),f(),i({title:"",desc:"",display:!1,type:"service",reference:"",image:null}),c(null)):u.error(N.message||"حدث خطأ أثناء إضافة العرض")}catch(N){u.error(N.message||"حدث خطأ أثناء إضافة العرض")}finally{y(!1)}};return m?e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",children:e.jsxs(C.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl h-[90vh] overflow-hidden flex flex-col md:flex-row",dir:"rtl",children:[e.jsxs("div",{className:"w-full md:w-1/2 bg-gray-50 p-6 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"معاينة صورة العرض"}),e.jsx("div",{className:"relative rounded-lg overflow-hidden border-2 border-dashed border-gray-300 hover:border-blue-500 transition-colors duration-200 aspect-[16/9]",children:e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer",onClick:()=>document.getElementById("imageUpload").click(),children:[x?e.jsxs("div",{className:"w-full h-full relative group",children:[e.jsx("img",{src:x,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:"تغيير الصورة"})})]}):e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"mb-3 text-gray-400",children:e.jsx("svg",{className:"mx-auto h-12 w-12",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("p",{className:"text-sm text-gray-500",children:"اضغط لرفع صورة"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, GIF حتى 10MB"})]}),e.jsx("input",{type:"file",id:"imageUpload",onChange:s,className:"hidden",accept:"image/*",disabled:o})]})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-500 space-y-1",children:[e.jsx("p",{children:"• يفضل أن تكون الصورة بأبعاد 16:9 (مثل 1920×1080)"}),e.jsx("p",{children:"• الحد الأقصى لحجم الملف: 10MB"}),e.jsx("p",{children:"• الصورة ستظهر في بطاقة العرض"})]})]}),e.jsxs("div",{className:"w-full md:w-1/2 p-6 md:p-8 overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 text-gray-800 border-b pb-4",children:"إضافة عرض جديد"}),e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عنوان العرض"}),e.jsx("input",{type:"text",value:r.title,onChange:t=>h(t,"title"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right",required:!0,disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),e.jsx("input",{type:"text",value:r.desc,onChange:t=>h(t,"desc"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right",required:!0,disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"النوع"}),e.jsxs("select",{value:r.type,onChange:t=>h(t,"type"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right",required:!0,disabled:o,children:[e.jsx("option",{value:"service",children:"خدمة"}),e.jsx("option",{value:"section",children:"قسم"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المرجع"}),r.type==="service"?e.jsxs("select",{value:r.reference,onChange:t=>h(t,"reference"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right",required:!0,disabled:o||v,children:[e.jsx("option",{value:"",children:"اختر الخدمة"}),b.map(t=>e.jsx("option",{value:t._id,children:t.title},t._id))]}):e.jsxs("select",{value:r.reference,onChange:t=>h(t,"reference"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right",required:!0,disabled:o||p,children:[e.jsx("option",{value:"",children:"اختر القسم"}),j.map(t=>e.jsx("option",{value:t._id,children:t.title},t._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"متاح للعرض"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.display,onChange:t=>h(t,"display"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:o}),e.jsx("span",{className:"mr-2 text-sm text-gray-600",children:"تفعيل العرض"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[e.jsx("button",{type:"button",onClick:f,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",disabled:o,children:"إغلاق"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2",disabled:o,children:o?e.jsx(L,{className:"animate-spin",size:20}):"تأكيد الإضافة"})]})]})]})]})},"Add-Offer-Modal"):null},te=({isOpen:m,onClose:f,offer:n,updateOffer:r})=>{const[i,x]=g.useState({title:"",desc:"",display:!1,type:"service",reference:""}),[c,o]=g.useState(!1),{services:y,loading:b}=U(),{sections:v,loading:j}=q();g.useEffect(()=>{n&&x({title:n.title||"",desc:n.desc||"",display:n.display||!1,type:n.type||"service",reference:n.reference||""})},[n]),g.useEffect(()=>{m&&(i.type==="service"||i.type)},[m,i.type]);const p=(s,l)=>{const t=l==="display"?s.target.checked:s.target.value;x({...i,[l]:t})},h=async s=>{s.preventDefault(),o(!0);const l={title:i.title,desc:i.desc,display:i.display,type:i.type,reference:i.reference};try{const t=await r({id:n._id,data:l});t.success?(u.success(t.message),f()):u.error(t.message||"حدث خطأ أثناء تعديل العرض")}catch(t){u.error(t.message||"حدث خطأ أثناء تعديل العرض")}finally{o(!1)}};return!m||!n?null:e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",children:e.jsxs(C.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},className:"bg-white rounded-xl shadow-2xl w-full max-w-5xl max-h-[95vh] overflow-y-auto p-8 md:p-10",dir:"rtl",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 text-gray-800 border-b pb-4",children:"تعديل بيانات العرض"}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"عنوان العرض"}),e.jsx("input",{type:"text",value:i.title,onChange:s=>p(s,"title"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right",required:!0,disabled:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),e.jsx("input",{type:"text",value:i.desc,onChange:s=>p(s,"desc"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right",required:!0,disabled:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"النوع"}),e.jsxs("select",{value:i.type,onChange:s=>p(s,"type"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right",required:!0,disabled:c,children:[e.jsx("option",{value:"service",children:"خدمة"}),e.jsx("option",{value:"section",children:"قسم"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المرجع"}),i.type==="service"?e.jsxs("select",{value:i.reference,onChange:s=>p(s,"reference"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right",required:!0,disabled:c||b,children:[e.jsx("option",{value:"",children:"اختر الخدمة"}),y.map(s=>e.jsx("option",{value:s._id,children:s.title},s._id))]}):e.jsxs("select",{value:i.reference,onChange:s=>p(s,"reference"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-right",required:!0,disabled:c||j,children:[e.jsx("option",{value:"",children:"اختر القسم"}),v.map(s=>e.jsx("option",{value:s._id,children:s.title},s._id))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"متاح للعرض"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:i.display,onChange:s=>p(s,"display"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:c}),e.jsx("span",{className:"mr-2 text-sm text-gray-600",children:"تفعيل العرض"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx("button",{type:"button",onClick:f,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",disabled:c,children:"إغلاق"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2",disabled:c,children:c?e.jsx(L,{className:"animate-spin",size:20}):"حفظ التعديلات"})]})]})]})},"Edit-Offer-Modal")},I="http://localhost:5000/api/v1/offer",se=async({page:m,size:f,search:n})=>(await S.get(`${I}?page=${m}&size=${f}&search=${n}`,{withCredentials:!0})).data,ae=()=>{const[m,f]=D(),n=T(),r=parseInt(m.get("page"))||1,i=8,x=m.get("search")||"",{data:c,isLoading:o,isFetching:y}=G({queryKey:["offers",r,x],queryFn:()=>se({page:r,size:i,search:x}),keepPreviousData:!0,staleTime:1e3*60*5}),b=P({mutationFn:async s=>(await S.post(I,s,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data,onSuccess:()=>{n.invalidateQueries(["offers"])},onError:s=>{var t,a;const l=(a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message;l?u.error(l):u.error("حدث خطأ أثناء إضافة العرض")}}),v=P({mutationFn:async({id:s,data:l})=>(await S.put(`${I}/${s}`,l,{withCredentials:!0})).data,onSuccess:()=>{n.invalidateQueries(["offers"])},onError:s=>{var t,a;const l=(a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message;l?u.error(l):u.error("حدث خطأ أثناء تحديث العرض")}}),j=P({mutationFn:async({id:s,formData:l})=>(await S.put(`${I}/image/${s}`,l,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data,onSuccess:()=>{n.invalidateQueries(["offers"])},onError:s=>{var t,a;const l=(a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message;l?u.error(l):u.error("حدث خطأ أثناء تحديث صورة العرض")}}),p=P({mutationFn:async s=>(await S.delete(`${I}/${s}`,{withCredentials:!0})).data,onSuccess:()=>{n.invalidateQueries(["offers"])},onError:s=>{var t,a;const l=(a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message;l?u.error(l):u.error("حدث خطأ أثناء حذف العرض")}}),h=s=>{f({page:s.toString(),search:x})};return{offers:(c==null?void 0:c.offers)||[],total:(c==null?void 0:c.totalOffers)||0,page:r,size:i,totalPages:Math.ceil(((c==null?void 0:c.totalOffers)||0)/i),loading:o,isFetching:y,handlePageChange:h,addOffer:b.mutateAsync,addLoading:b.isPending,updateOffer:v.mutateAsync,editLoading:v.isPending,updateOfferImage:j.mutateAsync,imageUploadLoading:j.isPending,deleteOffer:p.mutateAsync,deleteLoading:p.isPending}},re=({isOpen:m,onClose:f,offer:n,updateOfferImage:r})=>{var h,s;const[i,x]=g.useState(null),[c,o]=g.useState(null),[y,b]=g.useState(!1);g.useEffect(()=>{m||(x(null),o(null))},[m]);const v=l=>{const t=l.target.files[0];t&&(o(URL.createObjectURL(t)),x(t))},j=()=>{x(null),o(null),f()},p=async l=>{if(l.preventDefault(),!i){u.error("يرجى اختيار صورة للتحديث");return}b(!0);const t=new FormData;t.append("image",i);try{const a=await r({id:n._id,formData:t});a.success?(u.success(a.message),j()):u.error(a.message||"فشل تحديث صورة العرض")}catch(a){u.error(a.message||"حدث خطأ أثناء تحديث الصورة")}finally{b(!1)}};return!m||!n?null:e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-4",children:e.jsxs(C.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.3},className:"bg-white rounded-xl shadow-2xl w-full max-w-xl p-0 overflow-hidden flex flex-col items-center justify-center",dir:"rtl",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 text-center border-b pb-3 w-full",children:"تحديث صورة العرض"}),e.jsxs("form",{onSubmit:p,className:"w-full",children:[e.jsxs("div",{className:"flex flex-col items-center w-full px-6",children:[e.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-dashed border-gray-300 hover:border-blue-500 transition-colors duration-200 aspect-[16/9] w-full max-w-lg mx-auto cursor-pointer group",onClick:()=>document.getElementById("offerImageUpload").click(),children:[c||(h=n.image)!=null&&h.cardImage?e.jsxs("div",{className:"w-full h-full relative group",children:[e.jsx("img",{src:c||((s=n.image)==null?void 0:s.cardImage),alt:n.title,className:"w-full h-full object-cover object-top"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:"تغيير الصورة"})})]}):e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"mb-3 text-gray-400",children:e.jsx("svg",{className:"mx-auto h-12 w-12",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("p",{className:"text-sm text-gray-500",children:"اضغط لرفع صورة"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, GIF حتى 10MB"})]}),e.jsx("input",{type:"file",id:"offerImageUpload",onChange:v,className:"hidden",accept:"image/*",disabled:y})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-500 space-y-1 text-center w-full",children:[e.jsx("p",{children:"• يفضل أن تكون الصورة بأبعاد 16:9 (مثل 1920×1080)"}),e.jsx("p",{children:"• الحد الأقصى لحجم الملف: 10MB"}),e.jsx("p",{children:"• الصورة ستظهر في بطاقة العرض"})]})]}),e.jsxs("div",{className:"flex justify-between items-center gap-4 w-full px-6 pb-6 pt-2 border-t mt-6",children:[e.jsx("button",{type:"button",onClick:j,className:"px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200 font-medium",disabled:y,children:"اغلاق"}),e.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center gap-2 font-medium disabled:opacity-70",disabled:y,children:y?e.jsx(L,{className:"animate-spin",size:20}):"تحديث الصورة"})]})]})]})},"Update-Offer-Image-Modal")},ge=()=>{const[m,f]=D(),{offers:n,total:r,loading:i,page:x,totalPages:c,handlePageChange:o,addOffer:y,updateOffer:b,deleteOffer:v,updateOfferImage:j}=ae(),p=m.get("search")||"",[h,s]=g.useState(p),[l,t]=g.useState(!1),[a,N]=g.useState(!1),[F,z]=g.useState(!1),[E,B]=g.useState(null),[M,O]=g.useState(null),_=d=>{O(d),N(!0),z(!1)},A=d=>{O(d),z(!0),N(!1)},$=async d=>{if((await K.fire({title:"هل أنت متأكد؟",text:"!لن تتمكن من التراجع عن هذا",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"!نعم، احذف",cancelButtonText:"إلغاء"})).isConfirmed){B(d);try{const w=await v(d);w.success?u.success(w.message):u.error(w.message)}catch(w){u.error(w.message||"حدث خطأ أثناء الحذف")}finally{B(null)}}},R=d=>{s(d),f(k=>{const w=new URLSearchParams(k);return d?(w.set("search",d),w.set("page","1")):w.delete("search"),w})};return g.useEffect(()=>{s(m.get("search")||"")},[m]),e.jsxs("div",{className:"p-4 sm:p-6 bg-gray-100 min-h-screen overflow-x-auto",children:[e.jsx(Q,{position:"top-center",toastOptions:{className:"z-[99999]",style:{zIndex:99999}}}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"relative w-full sm:w-auto sm:max-w-md",dir:"rtl",children:[e.jsx(W,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",value:h,onChange:d=>R(d.target.value),placeholder:"ابحث عن عرض...",className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none text-right"})]}),e.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 w-full sm:w-auto transition cursor-pointer",children:[e.jsx(V,{size:20}),"إضافة عرض جديد"]})]}),e.jsx(ee,{isOpen:l,onClose:()=>t(!1),addOffer:y}),M&&e.jsx(re,{isOpen:F,onClose:()=>z(!1),offer:M,updateOfferImage:j}),M&&e.jsx(te,{isOpen:a,onClose:()=>O(null),offer:M,updateOffer:b}),i?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(L,{className:"animate-spin text-blue-500",size:32})}):e.jsxs(H.Fragment,{children:[e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-right",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-gray-500",children:"الصورة"}),e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-gray-500",children:"تفاصيل العرض"}),e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-gray-500",children:"تاريخ الإنشاء"}),e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-gray-500",children:"متاح للعرض"}),e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-gray-500",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?n.map(d=>{var k;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("div",{className:"relative aspect-square w-16 mx-auto bg-gray-100 overflow-hidden rounded-lg shadow-md cursor-pointer hover:opacity-90 transition",onClick:()=>O(d),children:e.jsx("img",{src:((k=d.image)==null?void 0:k.thumbnailMedium)||"/placeholder.png",alt:d.title,className:"w-full h-full object-cover",onClick:()=>A(d)})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"max-w-xl",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:d.title}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:d.desc})]})}),e.jsx("td",{className:"px-4 py-3 text-center text-xs text-gray-500 w-32",children:new Date(d.createdAt).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.display?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.display?"متاح":"غير متاح"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{onClick:()=>_(d),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"تعديل",children:e.jsx(X,{size:18})}),e.jsx("button",{onClick:()=>$(d._id),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"حذف",disabled:E===d._id,children:E===d._id?e.jsx(L,{size:18,className:"animate-spin"}):e.jsx(Y,{size:18})})]})})]},d._id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"لا توجد عروض متاحة"})})})]})}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-center gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["عرض ",n.length," من ",r," عرض"]}),e.jsxs("div",{className:"flex items-center gap-2 space-x-reverse",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:["صفحة ",x," من ",c]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(x-1),disabled:x===1,className:"p-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:e.jsx(Z,{size:20})}),e.jsx("button",{onClick:()=>o(x+1),disabled:x===c,className:"p-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:e.jsx(J,{size:20})})]})]})]})]})]})]})};export{ge as default};
