import{r as n,f as D,a as d}from"./index-BzNwyTTe.js";const R=()=>{const[y,v]=n.useState([]),[g,$]=n.useState(0),[L,p]=n.useState(!1),[E,m]=n.useState(!1),[A,f]=n.useState(!1),[C,h]=n.useState(!1),[P,S]=n.useState(!1),[w,z]=D(),c="http://localhost:5000/api/v1/service",l=parseInt(w.get("page"))||1,o=6,u=w.get("search")||"",i=async()=>{p(!0);try{const a=await d.get(`${c}/?page=${l}&size=${o}&search=${u}`),t=(a.data.services||[]).map(e=>({...e,description:Array.isArray(e.description)?e.description:[],features:Array.isArray(e.features)?e.features:[]}));console.log("data",t),v(t),$(a.data.totalServices||0)}catch(a){console.error("Error fetching services:",a)}finally{p(!1)}},I=async a=>{var t,e;m(!0);try{const s=await d.post(`${c}/`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});return await i(),{success:!0,message:s.data.message||"Service added successfully"}}catch(s){return console.error("Error adding service:",s),{success:!1,message:((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||"Something went wrong while adding service"}}finally{m(!1)}},x=async(a,t)=>{var e,s;f(!0);try{const r=await d.put(`${c}/${a}`,t,{withCredentials:!0});return await i(),{success:!0,message:r.data.message||"Service updated successfully"}}catch(r){return console.error("Error updating service:",r),{success:!1,message:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.message)||"Something went wrong while updating service"}}finally{f(!1)}},T=async(a,t)=>{var e,s;S(!0);try{const r=await d.put(`${c}/${a}`,t,{withCredentials:!0});return await i(),{success:!0,message:r.data.message||"Image updated successfully"}}catch(r){return console.error("Error updating service image:",r),{success:!1,message:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.message)||"Something went wrong while updating image"}}finally{S(!1)}},U=async a=>{var t,e;h(!0);try{const s=await d.delete(`${c}/${a}`,{withCredentials:!0});return await i(),{success:!0,message:s.data.message||"Service deleted successfully"}}catch(s){return console.error("Error deleting service:",s),{success:!1,message:((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||"Something went wrong while deleting service"}}finally{h(!1)}};n.useEffect(()=>{i()},[l,o,u]);const B=a=>{z({page:a.toString(),size:o.toString(),search:u})};return{services:y,total:g,loading:L,addLoading:E,editLoading:A,deleteLoading:C,imageUploadLoading:P,page:l,size:o,totalPages:Math.ceil(g/o),handlePageChange:B,addService:I,updateService:x,deleteService:U,updateServiceImage:T}};export{R as u};
