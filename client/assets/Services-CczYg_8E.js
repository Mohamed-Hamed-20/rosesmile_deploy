import{f as I,r as w,g as z,h as $,j as e,X as A,B as T,b as k}from"./index-BzNwyTTe.js";import{S as R}from"./search-SKB_sI0d.js";import{C as O}from"./chevron-down-CCbaeIxp.js";const F=()=>{const[o,l]=I(),[m,d]=w.useState(!1),[x,p]=w.useState(!1),S=o.get("search")||"",n=parseInt(o.get("page"))||1,u=o.getAll("sectionIds"),i=o.get("sort")||"",{data:b,loading:f,error:j,pagination:c}=z(),{sections:C,error:y}=$(),P=t=>{const r=t.target.value;l(s=>{const a=new URLSearchParams(s);return r?(a.set("search",r),a.set("page","1")):a.delete("search"),a})},v=t=>{l(r=>{const s=new URLSearchParams(r);return s.set("page",t.toString()),s})},N=t=>{l(r=>{const s=new URLSearchParams(r),a=s.getAll("sectionIds");return a.includes(t)?(s.delete("sectionIds"),a.filter(h=>h!==t).forEach(h=>s.append("sectionIds",h))):s.append("sectionIds",t),s.set("page","1"),s})},g=t=>{l(r=>{const s=new URLSearchParams(r);return s.set("sort",t),s.set("page","1"),s}),p(!1)},L=()=>i?i==="createdAt:desc"?"ترتيب بالأحدث":"ترتيب بالأسماء":"الكل";return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12 font-sans",children:[e.jsxs("div",{className:"flex flex-col items-end mb-8",children:[e.jsx("h1",{className:"text-center text-3xl md:text-4xl font-bold text-blue-800 mb-4",children:"كل الخدمات"}),e.jsxs("div",{className:"flex flex-col w-full sm:flex-row gap-4 max-w-2xl",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"...ابحث عن خدمة",value:S,onChange:P,className:"w-full py-2 px-4 pr-10 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-600 text-right transition-all duration-200"}),e.jsx(R,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20})]}),e.jsxs("div",{className:"relative w-full sm:w-48",children:[e.jsxs("button",{onClick:()=>p(!x),className:"w-full py-2 px-4 rounded-lg border border-gray-300 bg-white text-gray-700 flex items-center justify-between text-right transition-all duration-200 hover:border-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600",children:[e.jsx("span",{children:L()}),e.jsx(O,{size:20,className:`transition-transform duration-200 ${x?"rotate-180":""}`})]}),x&&e.jsxs("div",{className:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-1000",children:[e.jsx("button",{onClick:()=>g(""),className:`w-full py-2 px-4 text-right transition-all duration-200 ${i?"text-gray-700 hover:bg-blue-100":"bg-blue-100 text-blue-700 font-semibold"}`,children:"الكل"}),e.jsx("button",{onClick:()=>g("createdAt:desc"),className:`w-full py-2 px-4 text-right transition-all duration-200 ${i==="createdAt:desc"?"bg-blue-100 text-blue-700 font-semibold":"text-gray-700 hover:bg-blue-100"}`,children:"ترتيب بالأحدث"}),e.jsx("button",{onClick:()=>g("title:asc"),className:`w-full py-2 px-4 text-right transition-all duration-200 ${i==="title:asc"?"bg-blue-100 text-blue-700 font-semibold":"text-gray-700 hover:bg-blue-100"}`,children:"ترتيب بالأسماء"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row-reverse gap-6 relative",children:[e.jsxs("div",{className:`fixed lg:static inset-y-0 right-0 z-[50] w-80 max-w-[80%] bg-white shadow-sm lg:w-1/4 lg:bg-transparent p-6 transform transition-all duration-300 ease-in-out ${m?"translate-x-0":"translate-x-full lg:translate-x-0"}`,style:{top:"0"},dir:"rtl",children:[e.jsxs("div",{className:"sticky top-0 flex justify-between items-center mb-8 lg:hidden bg-white pb-4 border-b border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"الأقسام"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-600 hover:text-pink-500 transition-colors duration-200 cursor-pointer p-2 hover:bg-pink-50/50 rounded-full",children:e.jsx(A,{size:20})})]}),e.jsx("div",{className:"h-full overflow-y-auto",children:y?e.jsx("div",{className:"text-red-600",children:y}):e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("span",{className:"text-gray-700 text-xl",children:"الاقسام"}),C.map(t=>e.jsxs("div",{className:"flex items-center gap-3 text-right hover:bg-gray-50/80 p-2.5 rounded-lg transition-all duration-200 group pt-5",children:[e.jsxs("label",{className:"relative flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:u.includes(t.id),onChange:()=>N(t.id)}),e.jsx("div",{className:"w-4.5 h-4.5 border-2 border-gray-300 rounded flex items-center justify-center peer-checked:border-pink-400 peer-checked:bg-gradient-to-r from-pink-400 to-pink-500 transition-all duration-200 group-hover:border-pink-300",children:e.jsx("svg",{className:"w-2.5 h-2.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]}),e.jsx("span",{className:"flex-1 text-gray-600 group-hover:text-gray-900 transition-colors duration-200 cursor-pointer text-sm font-medium",onClick:()=>N(t.id),children:t.title}),e.jsx("span",{className:"text-xs text-gray-400 group-hover:text-pink-400 transition-colors duration-200"})]},t.id))]})}),u.length>0&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>{l(t=>{const r=new URLSearchParams(t);return r.delete("sectionIds"),r})},className:"text-xs text-pink-500 hover:text-pink-600 transition-colors duration-200",children:"مسح التصفية"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[u.length," قسم محدد"]})]})})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-[90] lg:hidden",onClick:()=>d(!1)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("button",{onClick:()=>d(!0),className:"lg:hidden flex items-center justify-center gap-2 bg-blue-600 text-white py-3 px-6 rounded-lg mb-4 cursor-pointer hover:bg-blue-700 transition-all duration-200 w-full",children:[e.jsx(T,{size:20}),e.jsx("span",{className:"text-base",children:"عرض الأقسام"})]}),j?e.jsx("div",{className:"text-center p-8 text-red-600",children:j}):b.length===0?e.jsx("div",{className:"text-center p-8 text-gray-600",children:"لا توجد خدمات مطابقة"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:b.map(t=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden h-[380px] flex flex-col transition-all duration-300",children:[e.jsxs("div",{className:"relative h-40 overflow-hidden",children:[e.jsx("img",{src:t.image.url,alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-110",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"})]}),e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-1",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-blue-800 mb-2 text-right line-clamp-2",children:t.title}),e.jsx("p",{className:"text-gray-600 text-right text-sm flex-1 mb-3 leading-relaxed",children:t.subTitle&&t.subTitle.length>100?`${t.subTitle.substring(0,100)}...`:t.subTitle||"لا يوجد وصف"}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 justify-end mt-auto",children:[e.jsx(k,{to:`/BookADeal/service/${t._id}`,className:"bg-blue-600 text-white py-2 px-3 sm:px-4 rounded-lg cursor-pointer hover:bg-blue-700 transition-all duration-200 text-sm sm:text-base",children:"احجز موعد"}),e.jsx(k,{to:`/service/${t._id}`,className:"bg-gray-100 text-gray-800 py-2 px-3 sm:px-4 rounded-lg cursor-pointer hover:bg-gray-200 transition-all duration-200 text-sm sm:text-base",children:"التفاصيل"})]})]})]},t._id))}),c&&c.totalPages>1&&e.jsxs("div",{className:"flex justify-center gap-4 mt-8 items-center",children:[e.jsx("button",{onClick:()=>v(n+1),disabled:n===c.totalPages||f,className:"bg-blue-600 text-white py-2 px-4 rounded disabled:opacity-50 cursor-pointer hover:bg-blue-500 transition-all duration-200",children:"التالي"}),e.jsxs("span",{className:"text-gray-600",children:["الصفحة ",n," من ",c.totalPages]}),e.jsx("button",{onClick:()=>v(Math.max(n-1,1)),disabled:n===1||f,className:"bg-blue-600 text-white py-2 px-4 rounded disabled:opacity-50 cursor-pointer hover:bg-blue-500 transition-all duration-200",children:"السابق"})]})]})]})]})]})};export{F as default};
