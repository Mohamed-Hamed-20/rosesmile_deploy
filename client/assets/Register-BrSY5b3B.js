import{r as h,a as N,u as g,j as r,b as w}from"./index-BzNwyTTe.js";import{u as v,L as j,E as b,y,c as C,a as o,b as B}from"./ReactToastify-C30oUaT2.js";import{E as f}from"./eye-B-AfLG2Q.js";const $=()=>{const[p,l]=h.useState(!1),[n,d]=h.useState(null);return{register:async x=>{var t,m,e,c,a;try{return l(!0),d(null),(await N.post("http://localhost:5000/api/v1/auth/register",x)).data}catch(s){const u=(m=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:m.errors;return console.error("ğŸ›‘ Full backend validation:",u||((e=s==null?void 0:s.response)==null?void 0:e.data)),d(((a=(c=s==null?void 0:s.response)==null?void 0:c.data)==null?void 0:a.message)||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„"),null}finally{l(!1)}},loading:p,error:n}},P=C({firstName:o().trim().min(3,"ÙŠØ¬Ø¨ Ø£Ù† Ù„Ø§ ÙŠÙ‚Ù„ Ø§Ù„Ø§Ø³Ù… Ø¹Ù† 3 Ø£Ø­Ø±Ù").max(33).required("Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨"),lastName:o().trim().min(3).max(33).required("Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£Ø®ÙŠØ± Ù…Ø·Ù„ÙˆØ¨"),email:o().email("Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­").matches(/^[\w-.]+@([\w-]+\.)+(com|net|org|pro|eg|sa)$/i,"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙ†ØªÙ‡ÙŠ Ø¨Ù€ .com Ø£Ùˆ .net Ø£Ùˆ .org Ø£Ùˆ .pro Ø£Ùˆ .eg Ø£Ùˆ .sa").required("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø·Ù„ÙˆØ¨"),password:o().matches(/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,}$/,"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø­Ø±Ù ÙˆØ£Ø±Ù‚Ø§Ù… Ùˆ 8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„").min(8).max(44).required("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø·Ù„ÙˆØ¨Ø©"),confirmPassword:o().oneOf([B("password"),null],"ÙƒÙ„Ù…ØªØ§ Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚ØªÙŠÙ†").required("ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø·Ù„ÙˆØ¨"),phone:o()}),q=()=>{const{register:p,loading:l,error:n}=$(),d=g(),[i,x]=h.useState(!1),[t,m]=h.useState(!1),e=v({initialValues:{firstName:"",lastName:"",email:"",password:"",confirmPassword:"",phone:""},validationSchema:P,onSubmit:async c=>{var u;const a={...c};(u=a.phone)!=null&&u.trim()?a.phone.startsWith("+2")||(a.phone=`+2${a.phone}`):delete a.phone;const s=await p(a);s!=null&&s.success&&(y.success("ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­ØŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"),setTimeout(()=>d("/login"),2e3))}});return r.jsxs("div",{className:"min-h-screen max-w-md mx-auto px-4 py-12 text-center",children:[r.jsx(j,{position:"bottom-left",rtl:!0,theme:"colored"}),r.jsx("h2",{className:"text-3xl font-bold text-blue-800 mb-6",children:"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯"}),n&&r.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 text-sm text-right",dir:"rtl",children:["âš ï¸ ",n]}),r.jsxs("form",{onSubmit:e.handleSubmit,className:"space-y-4 text-right",dir:"rtl",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("input",{name:"firstName",type:"text",placeholder:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„",className:`p-3 border rounded w-full ${e.touched.firstName&&e.errors.firstName?"border-red-500":"border-blue-800"}`,value:e.values.firstName,onChange:e.handleChange,onBlur:e.handleBlur}),e.touched.firstName&&e.errors.firstName&&r.jsx("div",{className:"text-red-500 text-sm",children:e.errors.firstName})]}),r.jsxs("div",{children:[r.jsx("input",{name:"lastName",type:"text",placeholder:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£Ø®ÙŠØ±",className:`p-3 border rounded w-full ${e.touched.lastName&&e.errors.lastName?"border-red-500":"border-blue-800"}`,value:e.values.lastName,onChange:e.handleChange,onBlur:e.handleBlur}),e.touched.lastName&&e.errors.lastName&&r.jsx("div",{className:"text-red-500 text-sm",children:e.errors.lastName})]})]}),r.jsx("input",{name:"email",type:"email",placeholder:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",className:`w-full p-3 border rounded ${e.touched.email&&e.errors.email?"border-red-500":"border-blue-800"}`,value:e.values.email,onChange:e.handleChange,onBlur:e.handleBlur}),e.touched.email&&e.errors.email&&r.jsx("div",{className:"text-red-500 text-sm",children:e.errors.email}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{name:"password",type:i?"text":"password",placeholder:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",className:`w-full p-3 border rounded pr-10 ${e.touched.password&&e.errors.password?"border-red-500":"border-blue-800"}`,value:e.values.password,onChange:e.handleChange,onBlur:e.handleBlur}),r.jsx("button",{type:"button",onClick:()=>x(!i),className:"absolute left-3 top-3 text-gray-600",children:i?r.jsx(b,{size:18}):r.jsx(f,{size:18})})]}),e.touched.password&&e.errors.password&&r.jsx("div",{className:"text-red-500 text-sm",children:e.errors.password}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{name:"confirmPassword",type:t?"text":"password",placeholder:"ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",className:`w-full p-3 border rounded pr-10 ${e.touched.confirmPassword&&e.errors.confirmPassword?"border-red-500":"border-blue-800"}`,value:e.values.confirmPassword,onChange:e.handleChange,onBlur:e.handleBlur}),r.jsx("button",{type:"button",onClick:()=>m(!t),className:"absolute left-3 top-3 text-gray-600",children:t?r.jsx(b,{size:18}):r.jsx(f,{size:18})})]}),e.touched.confirmPassword&&e.errors.confirmPassword&&r.jsx("div",{className:"text-red-500 text-sm",children:e.errors.confirmPassword}),r.jsx("input",{name:"phone",type:"text",placeholder:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",className:`w-full p-3 border rounded  ${e.touched.phone&&e.errors.phone?"border-red-500":"border-blue-800"}`,value:e.values.phone,onChange:e.handleChange,onBlur:e.handleBlur}),e.touched.phone&&e.errors.phone&&r.jsx("div",{className:"text-red-500 text-sm",children:e.errors.phone}),r.jsx("button",{type:"submit",className:"w-full p-3 bg-blue-800 text-white rounded hover:bg-blue-900 transition",disabled:l,children:l?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„...":"ØªØ³Ø¬ÙŠÙ„"})]}),r.jsxs("p",{className:"mt-4 text-gray-600",children:["Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ"," ",r.jsx(w,{to:"/login",className:"text-blue-800 hover:underline",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"})]})]})};export{q as default};
