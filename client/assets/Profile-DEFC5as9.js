import{c as Q,v as T,w as X,x as Y,r,j as e,y as o}from"./index-BzNwyTTe.js";/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M2 21a8 8 0 0 1 10.821-7.487",key:"1c8h7z"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}]],P=Q("user-round-pen",Z),ee=()=>{var A;const{userData:s,loading:M,error:v,updateUser:z,updateLoading:m,updateError:S}=T(),{uploadAvatar:F,loading:W,error:B}=X(),{changePassword:U,changePasswordLoading:p,changePasswordError:E}=Y(),[I,N]=r.useState((s==null?void 0:s.city)||""),[x,k]=r.useState(""),[d,C]=r.useState(""),[c,L]=r.useState(""),[g,R]=r.useState(!1),[h,O]=r.useState(!1),[f,_]=r.useState(!1),[$,u]=r.useState(((A=s==null?void 0:s.image)==null?void 0:A.url)||"../../assets/Iamges/user.png"),[V,w]=r.useState(!1),[l,j]=r.useState({firstName:"",lastName:"",phone:""});if(r.useEffect(()=>{var t;s&&(u(((t=s.image)==null?void 0:t.url)||"../../assets/Iamges/user.png"),N(s.city||""),j({firstName:s.firstName||"",lastName:s.lastName||"",phone:s.phone||""}))},[s]),M)return e.jsx("div",{className:"flex justify-center items-center h-screen text-gray-600",children:"Loading..."});if(v)return e.jsx("div",{className:"flex justify-center items-center h-screen text-red-500",children:v});const q=async t=>{var a,i;const n=t.target.files[0];if(n){const K=URL.createObjectURL(n);u(K);const b=await F(n);b?((a=b.image)!=null&&a.url&&u(b.image.url),o.success("تم تحميل الصورة بنجاح",{position:"top-right",style:{fontFamily:"Arial, sans-serif",direction:"rtl",textAlign:"right"}})):(u(((i=s==null?void 0:s.image)==null?void 0:i.url)||"../../assets/Iamges/user.png"),o.error(B||"فشل تحميل الصورة",{position:"top-right",style:{fontFamily:"Arial, sans-serif",direction:"rtl",textAlign:"right"}}))}},G=async()=>{if(d!==c){o.error("كلمة المرور الجديدة وتأكيد كلمة المرور لا تتطابق",{position:"top-right",style:{fontFamily:"Arial, sans-serif",direction:"rtl",textAlign:"right"}});return}if(!x||!d||!c){o.error("يرجى ملء جميع حقول كلمة المرور!",{position:"top-right",style:{fontFamily:"Arial, sans-serif",direction:"rtl",textAlign:"right"}});return}await U({currentPassword:x,newPassword:d,confirmPassword:c})?(o.success("تم تغيير كلمة المرور بنجاح",{position:"top-right",style:{fontFamily:"Arial, sans-serif",direction:"rtl",textAlign:"right"}}),k(""),C(""),L("")):alert(E||"Failed to change password")},y=t=>{const{name:n,value:a}=t.target;j(i=>({...i,[n]:a}))},H=async()=>{const{firstName:t,lastName:n,phone:a}=l;if(!t||!n||!a){o.error("يرجى ملء جميع الحقول!",{position:"top-right",style:{fontFamily:"Arial, sans-serif",direction:"rtl",textAlign:"right"}});return}await z(l)?(o.success("تم تحديث الملف الشخصي بنجاح",{position:"top-right",style:{fontFamily:"Arial, sans-serif",direction:"rtl",textAlign:"right"}}),w(!1)):o.error(S||"فشل تحديث الملف الشخصي",{position:"top-right",style:{fontFamily:"Arial, sans-serif",direction:"rtl",textAlign:"right"}})},J=()=>{if(!s){o.warning("فشل تحميل بيانات المستخدم",{position:"top-right",style:{fontFamily:"Arial, sans-serif",direction:"rtl",textAlign:"right"}});return}j({firstName:s.firstName||"",lastName:s.lastName||"",phone:s.phone||""}),w(!0)};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex justify-center items-start p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm w-full p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"اعدادات الملف الشخصي"}),e.jsxs("button",{onClick:J,className:"text-purple-600 flex items-center gap-1 text-sm font-medium hover:underline cursor-pointer",children:[e.jsx(P,{}),"تعديل الملف الشخصي"]})]}),V&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"تعديل الملف الشخصي"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الاسم الأول"}),e.jsx("input",{type:"text",name:"firstName",value:l.firstName,onChange:y,className:"mt-1 w-full p-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الاسم الأخير"}),e.jsx("input",{type:"text",name:"lastName",value:l.lastName,onChange:y,className:"mt-1 w-full p-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الموبايل"}),e.jsx("input",{type:"text",name:"phone",value:l.phone,maxLength:13,onChange:y,className:"mt-1 w-full p-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 rounded-md text-gray-600 bg-gray-200 hover:bg-gray-300 cursor-pointer transition-all duration-200",children:"إلغاء"}),e.jsx("button",{onClick:H,disabled:m,className:`px-4 py-2 rounded-md text-white font-medium focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-all duration-200 ${m?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:m?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),"جاري الحفظ..."]}):"حفظ التغييرات"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col items-start gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:$,alt:"Profile",className:"w-50 h-50 rounded-full object-cover border border-gray-200 shadow-sm"}),W&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 bg-opacity-50 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsxs("label",{className:"text-purple-600 flex items-center gap-1 text-sm font-medium cursor-pointer border border-purple-600 rounded-md px-3 py-2 hover:bg-purple-50 transition duration-200",children:[e.jsx(P,{}),"اضافة صورة شخصية",e.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"hidden"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الاسم الأول"}),e.jsx("input",{type:"text",value:s.firstName,disabled:!0,className:"mt-1 w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-700 text-sm focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الاسم الأخير"}),e.jsx("input",{type:"text",value:s.lastName,disabled:!0,className:"mt-1 w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-700 text-sm focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المدينة"}),e.jsx("input",{type:"text",value:I,onChange:t=>N(t.target.value),placeholder:"Enter your city",disabled:!0,className:"mt-1 w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-700 text-sm focus:outline-none"})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"رقم الهاتف"}),e.jsx("input",{type:"text",value:s.phone,disabled:!0,className:"mt-1 w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-700 text-sm focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),e.jsx("input",{type:"email",value:s.email,disabled:!0,className:"mt-1 w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-700 text-sm focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-purple-600 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 11c0-1.104-.896-2-2-2s-2 .896-2 2c0 .738.402 1.376 1 1.723V15a1 1 0 001 1h2a1 1 0 001-1v-2.277c.598-.347 1-.985 1-1.723zm9 1c0 5.523-4.477 10-10 10S1 17.523 1 12 5.477 2 11 2s10 4.477 10 10z"})}),"تغيير كلمة المرور"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"كلمة المرور الحالية"}),e.jsx("input",{type:g?"text":"password",value:x,onChange:t=>k(t.target.value),className:"mt-1 w-full p-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500"}),e.jsx("button",{type:"button",onClick:()=>R(!g),className:"absolute right-3 top-9 text-gray-400 hover:text-gray-600",children:g?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"كلمة المرور الجديدة"}),e.jsx("input",{type:h?"text":"password",value:d,onChange:t=>C(t.target.value),className:"mt-1 w-full p-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500"}),e.jsx("button",{type:"button",onClick:()=>O(!h),className:"absolute right-3 top-9 text-gray-400 hover:text-gray-600",children:h?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تأكيد كلمة المرور الجديدة"}),e.jsx("input",{type:f?"text":"password",value:c,onChange:t=>L(t.target.value),className:"mt-1 w-full p-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500"}),e.jsx("button",{type:"button",onClick:()=>_(!f),className:"absolute right-3 top-9 text-gray-400 hover:text-gray-600",children:f?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:G,disabled:p,className:`px-4 py-2 rounded-md text-white font-medium focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer transition-all duration-150 ${p?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:p?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),"جاري الحفظ..."]}):"تغيير كلمة المرور"})})]})]})]})})};export{ee as default};
